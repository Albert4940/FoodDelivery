@model FoodDeliveryWebApp.Models.OrderViewModel;
@{
    ViewData["Title"] = "Order Page";

    var Cart = Model?.Order;
    var Address = Model?.ShippingAddress;
    var OrderItems = Model?.OrderItems;
    var Payment = Model?.Payment;

    if (TempData["Result"] != null && TempData["Result"] != "")
    {
        <div class="alert alert-info" role="alert">
            @TempData["Result"]
        </div>
    }
    if (TempData["Error"] != null && TempData["Error"] != "")
    {
        <div class="alert alert-danger" role="alert">
            @TempData["Error"]
        </div>
    }
    else
    {
        <h1>OrderScreen : @Cart.Id</h1>
        <div class="row">
            <div class="col-12 col-md-8">
                <ul class="list-group">
                    <li class="list-group-item">
                        <h2>Shipping</h2>
                        <p>
                            <strong>Name: </strong>
                        </p>
                        <p>
                            <strong>Address: </strong>
                            @Address.Address, @Address.City, 
                            @Address.PostalCode,
                            @Address.Country
                        </p>
                    </li>

                    <li class="list-group-item">
                        <h2>Payment Method</h2>
                        
                            <strong>Method: </strong>
                            @{
                                if (Cart.IsPaid)
                                {
                                    <p>@Payment.PaymentMethod</p>
                                    <div class="alert alert-success" role="alert">
                                        Paid on @Payment.CreatedDate
                                    </div>
                            }
                            else
                            {
                                <div class="alert alert-danger" role="alert">
                                    Not Paid
                                </div>
                            }
                        }
                           
                            @Payment.PaymentMethod
                        
                    </li>
                    <li class="list-group-item">
                        @await Html.PartialAsync("_OrderItemsPartial", OrderItems)                        
                    </li>
                </ul>
            </div>
            <div class="col-12 col-md-4">
                <div class="card">
                    <ul class="list-group">
                        <li class="list-group-item">
                            <h2>Order Summary</h2>                            
                        </li>
                        <li class="list-group-item">
                            <div class="row">
                                <div class="col">Items</div>
                                <div class="col">$@($"{Cart.ItemsPrice:N2}")</div>
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="row">
                                <div class="col">Tax</div>
                                <div class="col">$@Cart.TaxPrice</div>
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="row">
                                <div class="col">Shipping</div>
                                <div class="col">$@Cart.ShippingPrice</div>
                            </div>
                        </li>
                        <li class="list-group-item">
                            <div class="row">
                                <div class="col">Total</div>
                                <div class="col">@(Cart is null ? "0.00" : $"{Cart.TotalPrice:N2}")</div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    }
}
